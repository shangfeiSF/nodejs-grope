<script>
  var someCar = {
    model: "Ford",
    owner: "someone",
    getModel: function () {
      console.info("This vehicle model is....." + this.model);
    },
    getOwner: function () {
      console.info("This vehicle owner is....." + this.owner);
    }
  };

  var myCar = Object.create(someCar);
  myCar.owner = 'shangfei'

  myCar.getModel()
  myCar.getOwner()
</script>

<script>
  var originID = 10

  var IDgeneration = function () {
    return originID++
  }

  var test = function (obj, data) {
    var props = []
    for (var p  in obj) {
      props.push(p)
    }
    console.log('---------------------')
    console.log(props)
    obj.id = data.id
    obj.model = data.model
    obj.color = data.color
    obj.owner = data.owner
    obj.getId()
    obj.getModel()
    obj.getOwner()
  }

  var extend = function() {
    var args = Array.prototype.slice.call(arguments)
    var fn = typeof args[args.length - 1] == 'function' && args.pop()
    var to = args.shift()

    for (var i = 0; i < args.length; i++) {
      var from = args[i]

      for (var p in from) {
        to[p] = fn ? fn(to[p], from[p]) : from[p]
      }
    }
    return to
  }

  var descriptor = function (model, color, owner) {
    return {
      "id": {
        // configurable:false,  // default
        // writable:false,          // defalut
        enumerable: false,
        value: IDgeneration()
      },
      "model": {
        enumerable: true,
        value: model
      },
      "color": {
        writable: true,
        enumerable: true,
        value: color
      },
      "owner": {
        configurable: true,
        writable: true,
        enumerable: true,
        value: owner
      }
    }
  }
</script>

<script>
  var vehicle = {
    init: function (Descriptor) {
      Object.defineProperties(this, Descriptor)
    },
    getId: function () {
      console.info("This vehicle id is....." + this.id);
    },
    getModel: function () {
      console.info("This vehicle model is....." + this.model);
    },
    getOwner: function () {
      console.info("This vehicle owner is....." + this.owner);
    }
  }
</script>

<script>
  // JS原生的原型模式
  var build = Object.create
  var proto = vehicle

  var tesla = build(proto, descriptor('Tesla', 'white', ''))

  test(tesla, {
    id: '123',
    model: 'Buick',
    color: 'yellow',
    owner: 'tony'
  })
</script>

<script>
  // 模拟JS原生的原型模式
  var _build = function(obj, Descriptor){
    function F() {}

    F.prototype =obj

    var f = new F()

    f.init(Descriptor);

    return f;
  }
  var _proto = extend({}, vehicle)

  var ferrari = _build(_proto, descriptor('Ferrari', 'black', ''));

  test(ferrari, {
    id: '456',
    model: 'Toyota',
    color: 'red',
    owner: 'john'
  })
</script>